import{_ as I}from"./O2bfNkhH.js";import{E as U,r,q as A,c as n,a as e,b as l,w as i,x as y,t as u,H as d,d as p,F as g,s as v,I as q,o,n as w,U as D}from"./0G305dhd.js";import{_ as M}from"./D9Tm4mlO.js";import{_ as H}from"./CBDKxmMK.js";import{_ as Q}from"./yTlZPTfq.js";import{_ as T}from"./eUb0384X.js";const Z={class:"flex","aria-label":"Breadcrumb"},z={class:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse"},G={class:"inline-flex items-center"},J=e("svg",{class:"me-2.5 h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})],-1),K={key:0},O={class:"flex items-center"},W=e("svg",{class:"mx-1 h-3 w-3 text-gray-400 rtl:rotate-180","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),X={key:1},Y={class:"flex items-center"},ee=e("svg",{class:"mx-1 h-3 w-3 text-gray-400 rtl:rotate-180","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),te={class:"ms-1 text-sm font-medium text-gray-500 md:ms-2"},oe={class:"flex flex-col items-center justify-center space-y-4 px-3 py-8 md:py-12 xl:py-16"},se={class:"mb-4 text-center text-2xl font-extrabold text-gray-900 md:text-4xl lg:text-5xl"},ae={class:"bg-gradient-to-r from-yellow-400 to-primary-600 bg-clip-text text-transparent"},re={class:"relative w-full max-w-md"},ne={key:0},ce={key:1,class:"p-4 text-center text-gray-500"},le={class:"font-semibold"},ie={class:"col-span-full p-4 text-center text-gray-500"},ue={class:"font-semibold"},de=e("hr",null,null,-1),me=e("h6",{class:"p-4 text-xl font-bold"},"Últimos productos agregados",-1),we={__name:"index",setup(_e){const h=U().params.slug,m=r(""),b=r(""),f=r(""),c=r(""),x=r([]),k=r([]),P=r(!0),S=r(!1),B=t=>{D(t)},V=t=>{console.log("Selected product",t.id)},$=async()=>{try{const t=await fetch(v(`/guest/subcategoria/getsubcategorydetailsbyslug/${h}`));if(!t.ok)throw new Error("Failed to fetch subcategory details");const s=await t.json();m.value=s.subcategory.name,b.value=s.category.name,f.value=s.category.slug}catch(t){console.error("Error fetching subcategory details:",t)}},j=async()=>{try{const t=await fetch(v(`/supplier/subcategoria/getrecentproductsbysubcategory/${h}`));if(!t.ok)throw new Error("Failed to fetch recent products");const s=await t.json();k.value=s.data}catch(t){console.error(t)}finally{P.value=!1}},E=async()=>{if(c.value.trim()===""){x.value=[];return}try{S.value=!0;const t=await fetch(v(`/supplier/subcategoria/searchrecentproductsbysubcategory/${h}?query=${c.value}`));if(!t.ok)throw new Error("Failed to search products");const s=await t.json();x.value=s.data}catch(t){console.error(t)}finally{S.value=!1}};return A(()=>{$(),j()}),(t,s)=>{const C=I,F=q,N=M,_=H,R=Q,L=T;return o(),n(g,null,[e("nav",Z,[e("ol",z,[e("li",G,[l(C,{to:"/explorar",class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-primary-600"},{default:i(()=>[J,p(" Inicio ")]),_:1})]),f.value?(o(),n("li",K,[e("div",O,[W,l(C,{to:{name:"explorar-categoria-slug",params:{slug:f.value}},class:"ms-1 text-sm font-medium text-gray-700 hover:text-primary-600 md:ms-2"},{default:i(()=>[p(u(b.value),1)]),_:1},8,["to"])])])):y("",!0),m.value?(o(),n("li",X,[e("div",Y,[ee,e("div",te,u(m.value),1)])])):y("",!0)])]),e("div",oe,[e("h1",se,[e("span",ae,u(m.value),1)]),e("div",re,[l(F,{type:"text",modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=a=>c.value=a),onInput:E,placeholder:"Buscar en subcategoria...",class:"mb-4 w-full rounded border p-2"},null,8,["modelValue"])])]),c.value?(o(),n("div",ne,[t.isSearching?(o(),d(_,{key:0},{default:i(()=>[(o(),n(g,null,w(6,a=>l(N,{key:a})),64))]),_:1})):t.noResultsFound?(o(),n("div",ce,[p(" No se encontró ningún producto llamado "),e("span",le,u(c.value),1)])):(o(),d(_,{key:2},{default:i(()=>[e("p",ie,[p(" Productos encontrados para "),e("span",ue,u(c.value),1)]),l(R,{products:x.value,onAgregar:B,updatePrice:V},null,8,["products"])]),_:1}))])):y("",!0),de,e("div",null,[me,P.value?(o(),d(_,{key:0},{default:i(()=>[(o(),n(g,null,w(6,a=>l(N,{key:a})),64))]),_:1})):(o(),d(_,{key:1},{default:i(()=>[(o(!0),n(g,null,w(k.value,a=>(o(),d(L,{key:a.id,product:a,onAgregar:B},null,8,["product"]))),128))]),_:1}))])],64)}}};export{we as default};
