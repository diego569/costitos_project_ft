import{_ as O}from"./DAP_5hhF.js";import{q as z,d as a,e as D,c as u,a as t,f as r,w as n,u as T,t as y,h as j,x as _,b as f,F as x,g as m,y as Z,o,r as $,z as G}from"./DaUbdcHR.js";import{_ as H}from"./DV_fjNU4.js";import{_ as J}from"./CRGUsnH4.js";import{_ as K}from"./3HrL69RO.js";import{_ as W,a as X}from"./DzWj9bkQ.js";const Y={class:"flex","aria-label":"Breadcrumb"},ee={class:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse"},te={class:"inline-flex items-center"},oe=t("svg",{class:"me-2.5 h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})],-1),se={key:0},ae={class:"flex items-center"},re=t("svg",{class:"mx-1 h-3 w-3 text-gray-400 rtl:rotate-180","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),ne={class:"ms-1 text-sm font-medium text-gray-700 md:ms-2"},ce={class:"flex flex-col items-center justify-center space-y-4 px-3 py-8 md:py-12 xl:py-16"},le={class:"mb-4 text-center text-2xl font-extrabold text-gray-900 md:text-4xl lg:text-5xl"},ue={class:"bg-gradient-to-r from-yellow-400 to-primary-600 bg-clip-text text-transparent"},ie={class:"relative w-full max-w-md"},de={key:0},_e={key:1,class:"p-4 text-center text-gray-500"},pe={class:"font-semibold"},me={class:"col-span-full p-4 text-center text-gray-500"},fe={class:"font-semibold"},ge=t("hr",null,null,-1),he=t("p",{class:"py-4 text-center text-lg text-gray-500 md:py-6 md:text-xl"},[f("O "),t("span",{class:"font-bold text-gray-900"},"Buscar"),f(" por subcategorias")],-1),ye=t("h6",{class:"p-4 text-xl font-bold"},"Últimos productos agregados",-1),xe=t("h6",{class:"p-4 text-xl font-bold"},"Productos más cotizados",-1),Fe={__name:"index",setup(ve){const i=z().params.slug,v=a(""),C=a([]),B=a([]),F=a([]),c=a(""),g=a([]),E=a(!0),N=a(!0),V=a(!0),h=a(!1),p=a(!1),w=e=>{G(e,{supplierProductId:e.id,unitOfMeasure:e.unitOfMeasure})},b=e=>{console.log("Selected product",e.id)},M=async()=>{try{const e=await fetch(m(`/guest/categoria/getcategorynamebyslug/${i}`));if(!e.ok)throw new Error("Failed to fetch category name");const s=await e.json();v.value=s.category.name}catch(e){console.error("Error fetching category name:",e)}},S=async()=>{try{const e=await fetch(m(`/guest/categoria/getsubcategoriesbycategoryslug/${i}`));if(!e.ok)throw new Error("Failed to fetch subcategories");const s=await e.json();C.value=s.data}catch(e){console.error(e)}finally{E.value=!1}},L=async()=>{try{const e=await fetch(m(`/guest/categoria/getrecentsupplierproductsbycategory/${i}`));if(!e.ok)throw new Error("Failed to fetch recent products");const s=await e.json();B.value=s.data}catch(e){console.error(e)}finally{N.value=!1}},R=async()=>{try{const e=await fetch(m(`/guest/categoria/getmostquotedproductsbycategory/${i}`));if(!e.ok)throw new Error("Failed to fetch most quoted products");const s=await e.json();F.value=s.data}catch(e){console.error(e)}finally{V.value=!1}},U=async()=>{if(c.value.trim()===""){g.value=[],p.value=!1,h.value=!1;return}h.value=!0,p.value=!1;try{const e=await fetch(m(`/guest/categoria/searchsupplierproductsbycategory/${i}?query=${c.value}`));if(!e.ok)throw new Error("Failed to search products");const s=await e.json();g.value=s.data,g.value.length===0&&(p.value=!0)}catch(e){console.error(e),p.value=!0}finally{h.value=!1}};return D(()=>{M(),S(),L(),R()}),(e,s)=>{const q=O,A=Z,k=H,d=J,P=K,I=X,Q=W;return o(),u(x,null,[t("nav",Y,[t("ol",ee,[t("li",te,[r(q,{to:"/",class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-primary-600"},{default:n(()=>[oe,f(" Inicio ")]),_:1})]),T(i)?(o(),u("li",se,[t("div",ae,[re,t("div",ne,y(v.value),1)])])):j("",!0)])]),t("div",ce,[t("h1",le,[t("span",ue,y(v.value),1)]),t("div",ie,[r(A,{type:"text",modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=l=>c.value=l),onInput:U,placeholder:"Buscar en categoria...",class:"mb-4 w-full rounded border p-2"},null,8,["modelValue"])])]),c.value?(o(),u("div",de,[h.value?(o(),_(d,{key:0},{default:n(()=>[(o(),u(x,null,$(6,l=>r(k,{key:l})),64))]),_:1})):p.value?(o(),u("div",_e,[f(" No se encontró ningún producto llamado "),t("span",pe,y(c.value),1)])):(o(),_(d,{key:2},{default:n(()=>[t("p",me,[f(" Productos encontrados para "),t("span",fe,y(c.value),1)]),r(P,{products:g.value,onAgregar:w,updatePrice:b},null,8,["products"])]),_:1}))])):j("",!0),ge,t("div",null,[he,r(Q,null,{default:n(()=>[r(I,{items:C.value,subcategory:""},null,8,["items"])]),_:1})]),t("div",null,[ye,N.value?(o(),_(d,{key:0},{default:n(()=>[(o(),u(x,null,$(6,l=>r(k,{key:l})),64))]),_:1})):(o(),_(d,{key:1},{default:n(()=>[r(P,{products:B.value,onAgregar:w,updatePrice:b},null,8,["products"])]),_:1}))]),t("div",null,[xe,V.value?(o(),_(d,{key:0},{default:n(()=>[(o(),u(x,null,$(6,l=>r(k,{key:l})),64))]),_:1})):(o(),_(d,{key:1},{default:n(()=>[r(P,{products:F.value,onAgregar:w,updatePrice:b},null,8,["products"])]),_:1}))])],64)}}};export{Fe as default};
