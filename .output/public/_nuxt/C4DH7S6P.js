import{r as l,o as s,c as a,b as n,w as m,a as e,y as W,W as J,t as v,L as K,v as j,u as L,A as X,h as ve,x as S,P as fe,q as he,F as h,O as w,s as k,n as C,S as ye,B as ge,H as y,C as xe,I as be}from"./0G305dhd.js";import{_ as we}from"./O2bfNkhH.js";import{_ as ke,a as Ce}from"./DfRHYdLe.js";import"./XL-23H_Y.js";const Se={class:"relative flex flex-col justify-between rounded-xl bg-white bg-clip-border p-2 text-gray-700 transition-all duration-200 hover:shadow-md"},$e={class:"relative aspect-square overflow-hidden rounded-xl bg-white bg-clip-border text-gray-700"},Be=["src"],Pe={class:"flex h-full w-full animate-pulse items-center justify-center bg-gray-200"},Me=e("svg",{class:"h-5 w-5 animate-spin text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C6.48 0 2 4.48 2 10h2zm2 5.29l-1.42-1.42C6.6 14.09 7 12.6 7 11H5c0 1.76-.55 3.4-1.49 4.71L6 17.29z"})],-1),Ve=[Me],Ne={class:"p-2 sm:p-3"},je={class:"mb-2 flex items-center justify-between"},Ie={class:"line-clamp-2 font-sans text-sm font-medium leading-relaxed text-gray-900 antialiased"},Le={class:"line-clamp-2 font-sans text-xs font-normal leading-normal text-gray-700 antialiased opacity-75 sm:line-clamp-3"},Ae={class:"flex justify-between p-2"},Te={class:"line-clamp-2 font-sans text-sm font-medium leading-relaxed text-gray-900 antialiased"},ze={class:"line-clamp-2 font-sans text-sm font-medium leading-relaxed text-gray-900 antialiased"},Ee={__name:"Product",props:{product:Object,updatePrice:Function},emits:["agregar"],setup(_,{emit:c}){const i=l(!0),g=()=>{i.value=!1};return(x,I)=>{const $=we;return s(),a("div",Se,[n($,{class:"pointer"},{default:m(()=>[e("div",$e,[W(e("img",{src:_.product.photo,onLoad:g,alt:"card-image",class:"h-full w-full object-cover object-center"},null,40,Be),[[J,!i.value]]),W(e("div",Pe,Ve,512),[[J,i.value]])]),e("div",Ne,[e("div",je,[e("p",Ie,v(_.product.name),1)]),e("p",Le,v(_.product.description),1)])]),_:1}),e("div",Ae,[e("div",Te,"S/. "+v(_.product.price),1),e("div",ze,v(_.product.unitOfMeasure),1)])])}}},Ge={__name:"Submain",setup(_){return(c,i)=>(s(),a("div",{class:j(["grid gap-2 sm:gap-4",L(X)?"grid-cols-2 md:grid-cols-3 2xl:grid-cols-4":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6"])},[K(c.$slots,"default")],2))}},Re={__name:"Main",setup(_){return(c,i)=>(s(),a("div",{class:j(["grid gap-2 sm:gap-4",L(X)?"md:grid-cols-6 xl:grid-cols-8":"md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10"])},[K(c.$slots,"default")],2))}},qe={__name:"Notification",props:{message:String,type:String,duration:{type:Number,default:3e3}},setup(_){const c=_,i=l(!1);return ve(()=>c.message,g=>{g&&(i.value=!0,setTimeout(()=>{i.value=!1},c.duration))}),(g,x)=>i.value?(s(),a("div",{key:0,class:j(["fixed bottom-4 left-4 rounded-lg p-4 shadow-lg transition-transform",_.type==="success"?"bg-primary-600 text-white":"bg-red-600 text-white"])},v(_.message),3)):S("",!0)}},Ue={class:"overflow-auto rounded-lg border bg-white md:col-span-2"},De=e("h6",{class:"p-3 text-lg font-bold"},"Categorías",-1),Fe={class:"overflow-auto"},Oe=["onClick"],He={class:"flex items-center gap-2"},Qe={class:"flex h-full w-full items-center justify-center"},We={class:"flex h-full w-full items-center justify-center"},Je={class:"select-none font-sans text-xs font-normal leading-normal antialiased"},Ke={key:0},Xe=["onClick"],Ye={class:"flex items-center gap-2"},Ze={class:"select-none font-sans text-xs font-normal leading-normal antialiased"},et={key:0},tt={key:0},st=e("p",null,"Cargando productos...",-1),ot=[st],at={key:1},lt={class:"flex justify-between"},rt=e("h6",{class:"p-1.5 text-lg font-bold"},"Buscar Productos",-1),nt=e("span",{class:"ml-2 hidden md:block"}," Agregar nuevo producto",-1),ct={key:0},ut=e("p",null,"Cargando resultados...",-1),it=[ut],dt={key:0},pt=e("h6",{class:"mt-4 p-3 text-lg font-bold"},"Productos",-1),_t={key:1},mt={key:0},vt=e("p",null,"Cargando productos...",-1),ft=[vt],ht={key:1},yt={class:"flex justify-between"},gt=e("h6",{class:"p-1.5 text-lg font-bold"},"Buscar Productos en Categoría",-1),xt=e("span",{class:"ml-2 hidden md:block"}," Agregar nuevo producto",-1),bt={key:0},wt=e("p",null,"Cargando resultados...",-1),kt=[wt],Ct={key:0},St=e("h6",{class:"mt-4 p-3 text-lg font-bold"},"Productos",-1),$t={key:2},Bt={key:0},Pt=e("p",null,"Cargando productos...",-1),Mt=[Pt],Vt={key:1},Nt={class:"flex justify-between"},jt=e("h6",{class:"p-1.5 text-lg font-bold"},"Buscar Productos en Subcategoría",-1),It=e("span",{class:"ml-2 hidden md:block"}," Agregar nuevo producto",-1),Lt={key:0},At=e("p",null,"Cargando resultados...",-1),Tt=[At],zt={key:0},Et=e("h6",{class:"mt-4 p-3 text-lg font-bold"},"Productos",-1),Ft={__name:"index",setup(_){const c=fe(),i=l([]),g=l([]),x=l([]),I=l([]),$=l([]),B=l([]),d=l(""),b=l(""),Y=l(!0),f=l(!1),A=l(!1),T=l(!1),z=l(!1),u=l(null),p=l(null),Z=async()=>{try{const t=await w(k(`/supplier/misproductos/getcategoriesbysupplier2/${c}`),"GET");i.value=t.data}catch(t){console.error(t)}finally{Y.value=!1}},ee=async t=>{try{const r=await w(k(`/supplier/misproductos/getsubcategoriesbysupplierandcategory/${c}/${t}`),"GET");g.value=r.data}catch(r){console.error(r)}},E=async()=>{f.value=!0;try{const t=await w(k(`/supplier/misproductos/getproductsbysupplier/${c}`),"GET");x.value=t.data}catch(t){console.error(t)}finally{f.value=!1}},G=async t=>{f.value=!0;try{const r=await w(k(`/supplier/misproductos/getproductsbysupplierandcategory/${c}/${t}`),"GET");x.value=r.data}catch(r){console.error(r)}finally{f.value=!1}},D=async t=>{f.value=!0;try{const r=await w(k(`/supplier/misproductos/getproductsbysupplierandsubcategory/${c}/${t}`),"GET");x.value=r.data}catch(r){console.error(r)}finally{f.value=!1}},te=async()=>{if(!d.value.trim()){I.value=[];return}A.value=!0;try{const t=await w(k(`/supplier/misproductos/searchproductsbysupplier/${c}?query=${d.value}`),"GET");I.value=t.data}catch(t){console.error(t)}finally{A.value=!1}},se=async()=>{if(!d.value.trim()){$.value=[];return}T.value=!0;try{const t=await w(k(`/supplier/misproductos/searchproductsbysupplierandcategory/${c}/${u.value}?query=${d.value}`),"GET");$.value=t.data}catch(t){console.error(t)}finally{T.value=!1}},oe=async()=>{if(!b.value.trim()){B.value=[];return}z.value=!0;try{const t=await w(k(`/supplier/misproductos/searchproductsbysupplierandsubcategory/${c}/${p.value}?query=${b.value}`),"GET");B.value=t.data}catch(t){console.error(t)}finally{z.value=!1}},ae=t=>{u.value===t.id?(u.value=null,p.value=null,g.value=[],E()):(u.value=t.id,p.value=null,ee(t.id),G(t.id)),d.value="",b.value="",$.value=[],B.value=[]},le=t=>{p.value===t.id?(p.value=null,G(u.value)):(p.value=t.id,D(t.id)),b.value="",B.value=[]};he(()=>{Z(),E()});const R=l(!1),F=l(!1),O=l(""),H=l(""),q=()=>{R.value=!0},re=()=>{R.value=!1},ne=({message:t,type:r})=>{O.value=t,H.value=r,F.value=!0,setTimeout(()=>{F.value=!1},3e3)},ce=()=>{p.value?D(p.value):u.value?G(u.value):E()},Q=l(!1),ue=()=>{Q.value=!1},ie=t=>{i.value.push(t),console.log("Nueva categoría creada:",t)};return(t,r)=>{const P=xe,U=be,M=Ee,V=Ge,de=Re,pe=ke,_e=qe,me=Ce;return s(),a(h,null,[n(de,{class:"max-h-[calc(100vh_-_100px)]"},{default:m(()=>[e("div",Ue,[De,e("div",Fe,[(s(!0),a(h,null,C(i.value,o=>(s(),a("div",{key:o.id},[e("div",{onClick:N=>ae(o),class:j([{"text-black":u.value===o.id,"text-gray-600":u.value!==o.id},"flex cursor-pointer items-center justify-start border-t p-2 hover:bg-primary-200"])},[e("div",He,[e("div",Qe,[n(P,{name:u.value===o.id?"my-icon:caret-down":"my-icon:caret-right",size:"20"},null,8,["name"])]),e("div",We,[n(P,{name:u.value===o.id?"my-icon:folder-open":"my-icon:folder-close",size:"20"},null,8,["name"])]),e("p",Je,v(o.name),1)])],10,Oe),n(L(ye),{show:u.value===o.id,as:"template"},{default:m(()=>[n(L(ge),{as:"div",enter:"transition ease-out duration-300 transform","enter-from":"-translate-y-4 opacity-0","enter-to":"translate-y-0 opacity-100",leave:"transition ease-in duration-200 transform","leave-from":"translate-y-0 opacity-100","leave-to":"-translate-y-4 opacity-0"},{default:m(()=>[u.value===o.id?(s(),a("div",Ke,[(s(!0),a(h,null,C(g.value,N=>(s(),a("div",{key:N.id,onClick:Gt=>le(N),class:j([{"bg-primary-500 text-white":p.value===N.id,"text-gray-600 hover:bg-primary-200":p.value!==N.id},"cursor-pointer border-t p-2 text-gray-400"])},[e("div",Ye,[n(P,{name:"my-icon:circles-four",size:"20"}),e("p",Ze,v(N.name),1)])],10,Xe))),128))])):S("",!0)]),_:2},1024)]),_:2},1032,["show"])]))),128))])]),e("div",{class:j(["hidden h-full overflow-auto rounded-lg md:block",t.showMenu?"col-span-2 md:col-span-4 xl:col-span-6":"col-span-2 md:col-span-4 lg:col-span-6 xl:col-span-8"])},[u.value?S("",!0):(s(),a("div",et,[f.value?(s(),a("div",tt,ot)):(s(),a("div",at,[e("div",lt,[rt,e("button",{onClick:q,class:"relative flex items-center rounded-md bg-primary-600 px-3 py-1.5 text-sm text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-primary-100"},[n(P,{name:"my-icon:plus",size:"20",class:"ml-2"}),nt])]),n(U,{id:"defaultSearch",type:"text",modelValue:d.value,"onUpdate:modelValue":r[0]||(r[0]=o=>d.value=o),onInput:te,placeholder:"Buscar productos..."},null,8,["modelValue"]),A.value?(s(),a("div",ct,it)):(s(),y(V,{key:1},{default:m(()=>[(s(!0),a(h,null,C(I.value,o=>(s(),y(M,{key:o.supplier_product_id,product:o},null,8,["product"]))),128)),!I.value.length&&d.value.trim()?(s(),a("p",dt,'No se encontraron resultados para "'+v(d.value)+'"',1)):S("",!0)]),_:1})),pt,n(V,null,{default:m(()=>[(s(!0),a(h,null,C(x.value,o=>(s(),y(M,{key:o.supplier_product_id,product:o},null,8,["product"]))),128))]),_:1})]))])),u.value&&!p.value?(s(),a("div",_t,[f.value?(s(),a("div",mt,ft)):(s(),a("div",ht,[e("div",yt,[gt,e("button",{onClick:q,class:"relative flex items-center rounded-md bg-primary-600 px-3 py-1.5 text-sm text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-primary-100"},[n(P,{name:"my-icon:plus",size:"20",class:"ml-2"}),xt])]),n(U,{id:"categorySearch",type:"text",modelValue:d.value,"onUpdate:modelValue":r[1]||(r[1]=o=>d.value=o),onInput:se,placeholder:"Buscar productos..."},null,8,["modelValue"]),T.value?(s(),a("div",bt,kt)):(s(),y(V,{key:1},{default:m(()=>[(s(!0),a(h,null,C($.value,o=>(s(),y(M,{key:o.supplier_product_id,product:o},null,8,["product"]))),128)),!$.value.length&&d.value.trim()?(s(),a("p",Ct,'No se encontraron resultados para "'+v(d.value)+'"',1)):S("",!0)]),_:1})),St,n(V,null,{default:m(()=>[(s(!0),a(h,null,C(x.value,o=>(s(),y(M,{key:o.supplier_product_id,product:o},null,8,["product"]))),128))]),_:1})]))])):S("",!0),p.value?(s(),a("div",$t,[f.value?(s(),a("div",Bt,Mt)):(s(),a("div",Vt,[e("div",Nt,[jt,e("button",{onClick:q,class:"relative flex items-center rounded-md bg-primary-600 px-3 py-1.5 text-sm text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-primary-100"},[n(P,{name:"my-icon:plus",size:"20",class:"ml-2"}),It])]),n(U,{id:"subcategorySearch",type:"text",modelValue:b.value,"onUpdate:modelValue":r[2]||(r[2]=o=>b.value=o),onInput:oe,placeholder:"Buscar productos..."},null,8,["modelValue"]),z.value?(s(),a("div",Lt,Tt)):(s(),y(V,{key:1},{default:m(()=>[(s(!0),a(h,null,C(B.value,o=>(s(),y(M,{key:o.supplier_product_id,product:o},null,8,["product"]))),128)),!B.value.length&&b.value.trim()?(s(),a("p",zt,'No se encontraron resultados para "'+v(b.value)+'"',1)):S("",!0)]),_:1})),Et,n(V,null,{default:m(()=>[(s(!0),a(h,null,C(x.value,o=>(s(),y(M,{key:o.supplier_product_id,product:o},null,8,["product"]))),128))]),_:1})]))])):S("",!0)],2)]),_:1}),n(pe,{showModal:R.value,closeModal:re,categoryId:u.value,subcategoryId:p.value,onNotify:ne,onProductAdded:ce},null,8,["showModal","categoryId","subcategoryId"]),n(_e,{message:O.value,type:H.value},null,8,["message","type"]),n(me,{showModal:Q.value,closeModal:ue,onCategoryCreated:ie},null,8,["showModal"])],64)}}};export{Ft as default};
