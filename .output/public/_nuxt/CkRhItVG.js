import{d as s,e as L,c as d,a as t,f as r,x as i,w as l,b as h,t as B,h as R,F as m,g,y as S,o,r as k,z as I}from"./BET-V8ZF.js";import{_ as O}from"./Fell5ufQ.js";import{_ as Q}from"./BJHe_P7b.js";import{_ as z}from"./tsJo5OVu.js";import{_ as D,a as G}from"./D-8qT3H8.js";import"./Bc_7XvHW.js";const T={class:"flex flex-col items-center justify-center space-y-4 px-3 py-8 md:py-12 xl:py-16"},H=t("h1",{class:"mb-4 text-center text-2xl font-extrabold text-gray-900 md:text-4xl lg:text-5xl"},[t("span",{class:"bg-gradient-to-r from-yellow-400 to-primary-600 bg-clip-text text-transparent"},"Materiales de Construcción")],-1),J={class:"relative w-full max-w-md"},K={key:0},W={key:1,class:"p-4 text-center text-gray-500"},X={class:"font-semibold"},Y={class:"col-span-full p-4 text-center text-gray-500"},Z={class:"font-semibold"},ee=t("hr",null,null,-1),te=t("p",{class:"py-4 text-center text-lg text-gray-500 md:py-6 md:text-xl"},[h("O "),t("span",{class:"font-bold text-gray-900"},"Buscar"),h(" por categorias")],-1),oe=t("h6",{class:"p-4 text-xl font-bold"},"Últimos productos agregados",-1),ae=t("h6",{class:"p-4 text-xl font-bold"},"Productos más cotizados",-1),ie={__name:"index",setup(se){const P=s([]),_=s([]),b=s([]),C=s([]),c=s(""),M=s(!0),V=s(!0),E=s(!0),f=s(!1),p=s(!1),F=async()=>{try{const e=await fetch(g("/guest/catalogo/getrecentsupplierproducts"));if(!e.ok)throw new Error("Failed to fetch recent products");const a=await e.json();P.value=a.data,M.value=!1}catch(e){console.error(e)}},$=async()=>{try{const e=await fetch(g("/guest/catalogo/getmostquotedproducts"));if(!e.ok)throw new Error("Failed to fetch most quoted products");const a=await e.json();b.value=a.data,V.value=!1}catch(e){console.error(e)}},j=async()=>{try{const e=await fetch(g("/guest/catalogo/getcategories"));if(!e.ok)throw new Error("Failed to fetch categories");const a=await e.json();C.value=a.data,E.value=!1}catch(e){console.error(e)}},N=async()=>{if(c.value.trim()===""){_.value=[],p.value=!1,f.value=!1;return}f.value=!0,p.value=!1;try{const e=await fetch(g(`/guest/catalogo/search?query=${c.value}`));if(!e.ok)throw new Error("Error fetching products");const a=await e.json();_.value=a.data,_.value.length===0&&(p.value=!0)}catch(e){console.error(e),p.value=!0}finally{f.value=!1}},y=e=>{I(e,{supplierProductId:e.id,unitOfMeasure:e.unitOfMeasure})},v=e=>{console.log("Selected product",e.id)};return L(()=>{j(),F(),$()}),(e,a)=>{const U=S,x=O,u=Q,w=z,q=G,A=D;return o(),d(m,null,[t("div",T,[H,t("div",J,[r(U,{type:"text",modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=n=>c.value=n),onInput:N,placeholder:"Buscar General..",class:"mb-4 w-full rounded border p-2"},null,8,["modelValue"])])]),c.value?(o(),d("div",K,[f.value?(o(),i(u,{key:0},{default:l(()=>[(o(),d(m,null,k(6,n=>r(x,{key:n})),64))]),_:1})):p.value?(o(),d("div",W,[h(" No se encontró ningún producto llamado "),t("span",X,B(c.value),1)])):(o(),i(u,{key:2},{default:l(()=>[t("p",Y,[h(" Productos encontrados para "),t("span",Z,B(c.value),1)]),r(w,{products:_.value,onAgregar:y,updatePrice:v},null,8,["products"])]),_:1}))])):R("",!0),ee,t("div",null,[te,r(A,null,{default:l(()=>[r(q,{items:C.value,category:""},null,8,["items"])]),_:1})]),t("div",null,[oe,M.value?(o(),i(u,{key:0},{default:l(()=>[(o(),d(m,null,k(6,n=>r(x,{key:n})),64))]),_:1})):(o(),i(u,{key:1},{default:l(()=>[r(w,{products:P.value,onAgregar:y,updatePrice:v},null,8,["products"])]),_:1}))]),t("div",null,[ae,V.value?(o(),i(u,{key:0},{default:l(()=>[(o(),d(m,null,k(6,n=>r(x,{key:n})),64))]),_:1})):(o(),i(u,{key:1},{default:l(()=>[r(w,{products:b.value,onAgregar:y,updatePrice:v},null,8,["products"])]),_:1}))])],64)}}};export{ie as default};
