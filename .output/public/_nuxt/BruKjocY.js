import{_ as j}from"./BQu5mOqc.js";import{d as u,N as P,o as r,y as D,w as l,f as s,u as c,Y as L,j as w,a as e,G as V,V as z,b as v,t as n,c as i,F as E,r as N,n as S,S as B,D as C,g as k,h as F,i as $,O as M}from"./CC3ln1j6.js";import{r as A}from"./LB9R_xqz.js";import{N as G,Q as O,V as T}from"./Cu-iZpwZ.js";const q=e("div",{class:"fixed inset-0 bg-black/25"},null,-1),R={class:"fixed inset-0 overflow-y-auto"},Y={class:"flex min-h-full items-center justify-center p-4 text-center"},H=e("hr",{class:"mb-4"},null,-1),I={class:"mt-2 flex flex-col md:flex-row"},Q={class:"mb-4 w-full md:mb-0 md:w-1/3 md:pr-4"},W=["src"],J={class:"flex w-full flex-col gap-2 md:w-2/3"},K={class:"text-2xl font-semibold"},U={class:"text-sm"},X={key:0,class:"text-sm text-gray-600"},Z=e("strong",null,"Categoría:",-1),ee=e("br",null,null,-1),te=e("strong",null,"Subcategoría:",-1),ae={key:1,class:"text-sm text-gray-500"},se={class:"mt-4"},oe=e("h4",{class:"font-semibold"},"Características:",-1),le={key:0,class:"mt-4"},ce={key:1,class:"mt-4 text-gray-500"},re={key:2},ne={class:"mt-6 flex justify-end space-x-2"},ie={__name:"ProductDetail",props:{showModal:Boolean,product:Object,closeModal:Function},setup(t){const g=t,m=u([]),o=u({category:null,subcategory:null}),f=u(!1),p=u(!1),x=async()=>{f.value=!0;try{const a=await C(k(`/supplier/producto/${g.product.id}/features`),"GET");m.value=a.features}catch(a){console.error("Error fetching product features:",a)}finally{f.value=!1}},_=async()=>{p.value=!0;try{const a=await C(k(`/supplier/producto/${g.product.id}/category-subcategory`),"GET");o.value=a}catch(a){console.error("Error fetching category and subcategory data:",a)}finally{p.value=!1}};return P(()=>g.showModal,a=>{a&&g.product&&g.product.id&&(x(),_())}),(a,y)=>{const h=j;return r(),D(c(B),{appear:"",show:t.showModal,as:"template"},{default:l(()=>[s(c(L),{as:"div",onClose:t.closeModal,class:"relative z-10"},{default:l(()=>[s(c(w),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[q]),_:1}),e("div",R,[e("div",Y,[s(c(w),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[s(c(V),{class:"w-full max-w-3xl transform overflow-hidden rounded-lg bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:l(()=>[s(c(z),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:l(()=>[v("Detalles del Producto")]),_:1}),H,e("div",I,[e("div",Q,[e("img",{src:t.product.photo,alt:"product image",class:"aspect-square size-full rounded-md object-cover"},null,8,W)]),e("div",J,[e("p",K,n(t.product.name),1),e("p",U,n(t.product.description),1),o.value.category&&o.value.subcategory?(r(),i("p",X,[Z,s(h,{to:{name:"explorar-categoria-slug",params:{slug:o.value.category.slug}},class:"text-blue-600 hover:underline"},{default:l(()=>[v(n(o.value.category.name),1)]),_:1},8,["to"]),ee,te,s(h,{to:{name:"explorar-subcategoria-slug",params:{slug:o.value.subcategory.slug}},class:"text-blue-600 hover:underline"},{default:l(()=>[v(n(o.value.subcategory.name),1)]),_:1},8,["to"])])):(r(),i("p",ae,"Cargando categoría y subcategoría..."))])]),e("div",se,[oe,a.isLoading?(r(),i("div",le,"Cargando características...")):m.value.length===0?(r(),i("div",ce,"Este producto no tiene características.")):(r(),i("ul",re,[(r(!0),i(E,null,N(m.value,d=>(r(),i("li",{key:d.id,class:"mt-2"},[s(c(G),{as:"div",class:"mt-2"},{default:l(({open:b})=>[s(c(O),{class:"flex w-full justify-between rounded-lg bg-gray-50 px-4 py-2 text-left text-sm font-medium text-gray-900 hover:bg-gray-200 focus:outline-none focus-visible:ring focus-visible:ring-gray-500/75"},{default:l(()=>[e("span",null,n(d.name)+": "+n(d.value),1),s(c(A),{class:S([{"rotate-180 transform":!b},"h-5 w-5 text-gray-500"])},null,8,["class"])]),_:2},1024),s(c(T),{class:"px-4 pb-2 pt-4 text-sm text-gray-500"},{default:l(()=>[v(n(d.description),1)]),_:2},1024)]),_:2},1024)]))),128))]))]),e("div",ne,[e("button",{onClick:y[0]||(y[0]=(...d)=>t.closeModal&&t.closeModal(...d)),class:"rounded-md bg-gray-600 px-4 py-2 text-white hover:bg-gray-700"},"Cerrar")])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])}}},de={class:"relative flex flex-col justify-between rounded-xl bg-white bg-clip-border p-2 text-gray-700 transition-all duration-200 hover:shadow-md"},ue={key:0,class:"absolute right-2 top-2 z-10 rounded-lg bg-blue-500 px-3 py-1 text-xs font-semibold text-white"},ge=["src"],fe={class:"flex h-full w-full animate-pulse items-center justify-center bg-gray-200"},me=e("svg",{class:"h-5 w-5 animate-spin text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C6.48 0 2 4.48 2 10h2zm2 5.29l-1.42-1.42C6.6 14.09 7 12.6 7 11H5c0 1.76-.55 3.4-1.49 4.71L6 17.29z"})],-1),pe=[me],he={class:"p-2 sm:p-3"},ye={class:"mb-2 flex items-center justify-between"},ve={class:"line-clamp-2 font-sans text-sm font-medium leading-relaxed text-gray-900 antialiased"},xe={class:"line-clamp-2 font-sans text-xs font-normal leading-normal text-gray-700 antialiased opacity-75 sm:line-clamp-3"},_e={class:"flex w-full"},$e={__name:"ProductCard",props:{product:Object,updatePrice:Function},emits:["agregar"],setup(t,{emit:g}){const m=t,o=u(!0),f=u(!1),p=u(null),x=()=>{o.value=!1},_=()=>{p.value=m.product,f.value=!0},a=()=>{f.value=!1};return(y,h)=>{const d=ie;return r(),i("div",de,[t.product.isAuthorized?F("",!0):(r(),i("div",ue,"En Revisión")),e("div",{class:"relative aspect-square overflow-hidden rounded-xl bg-white bg-clip-border text-gray-700 hover:cursor-pointer",onClick:_},[$(e("img",{src:t.product.photo,onLoad:x,alt:"card-image",class:"h-full w-full object-cover object-center"},null,40,ge),[[M,!o.value]]),$(e("div",fe,pe,512),[[M,o.value]])]),e("div",he,[e("div",ye,[e("p",ve,n(t.product.name),1)]),e("p",xe,n(t.product.description),1)]),e("div",_e,[e("button",{class:"block w-full select-none rounded-lg bg-gray-900/10 px-5 py-3 text-center align-middle font-sans text-xs font-bold uppercase text-gray-900 shadow-none shadow-gray-900/10 transition-all hover:scale-105 hover:shadow-none hover:shadow-gray-900/20 focus:scale-105 focus:opacity-[0.85] focus:shadow-none active:scale-100 active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button",onClick:h[0]||(h[0]=b=>y.$emit("agregar",t.product,t.product.selectedMeasure))}," Agregar ")]),s(d,{showModal:f.value,product:p.value,closeModal:a},null,8,["showModal","product"])])}}};export{$e as _};
