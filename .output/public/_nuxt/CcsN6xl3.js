import{_ as j}from"./Bc_7XvHW.js";import{d as u,M as P,o as r,x as D,w as l,f as s,u as c,Y as L,j as w,a as e,G as S,V,b as v,t as n,c as d,F as B,r as E,n as F,S as N,C,g as k,i as M,N as $}from"./BET-V8ZF.js";import{r as z}from"./tQi0cZQx.js";import{N as G,Q as A,V as T}from"./CZhTqw-T.js";const q=e("div",{class:"fixed inset-0 bg-black/25"},null,-1),O={class:"fixed inset-0 overflow-y-auto"},Y={class:"flex min-h-full items-center justify-center p-4 text-center"},H=e("hr",{class:"mb-4"},null,-1),I={class:"mt-2 flex flex-col md:flex-row"},Q={class:"mb-4 w-full md:mb-0 md:w-1/3 md:pr-4"},R=["src"],W={class:"flex w-full flex-col gap-2 md:w-2/3"},J={class:"text-2xl font-semibold"},K={class:"text-sm"},U={key:0,class:"text-sm text-gray-600"},X=e("strong",null,"Categoría:",-1),Z=e("br",null,null,-1),ee=e("strong",null,"Subcategoría:",-1),te={key:1,class:"text-sm text-gray-500"},ae={class:"mt-4"},se=e("h4",{class:"font-semibold"},"Características:",-1),oe={key:0,class:"mt-4"},le={key:1,class:"mt-4 text-gray-500"},ce={key:2},re={class:"mt-6 flex justify-end space-x-2"},ne={__name:"ProductDetail",props:{showModal:Boolean,product:Object,closeModal:Function},setup(t){const g=t,m=u([]),o=u({category:null,subcategory:null}),f=u(!1),p=u(!1),x=async()=>{f.value=!0;try{const a=await C(k(`/supplier/producto/${g.product.id}/features`),"GET");m.value=a.features}catch(a){console.error("Error fetching product features:",a)}finally{f.value=!1}},_=async()=>{p.value=!0;try{const a=await C(k(`/supplier/producto/${g.product.id}/category-subcategory`),"GET");o.value=a}catch(a){console.error("Error fetching category and subcategory data:",a)}finally{p.value=!1}};return P(()=>g.showModal,a=>{a&&g.product&&g.product.id&&(x(),_())}),(a,y)=>{const h=j;return r(),D(c(N),{appear:"",show:t.showModal,as:"template"},{default:l(()=>[s(c(L),{as:"div",onClose:t.closeModal,class:"relative z-10"},{default:l(()=>[s(c(w),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[q]),_:1}),e("div",O,[e("div",Y,[s(c(w),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[s(c(S),{class:"w-full max-w-3xl transform overflow-hidden rounded-lg bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:l(()=>[s(c(V),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:l(()=>[v("Detalles del Producto")]),_:1}),H,e("div",I,[e("div",Q,[e("img",{src:t.product.photo,alt:"product image",class:"aspect-square size-full rounded-md object-cover"},null,8,R)]),e("div",W,[e("p",J,n(t.product.name),1),e("p",K,n(t.product.description),1),o.value.category&&o.value.subcategory?(r(),d("p",U,[X,s(h,{to:{name:"explorar-categoria-slug",params:{slug:o.value.category.slug}},class:"text-blue-600 hover:underline"},{default:l(()=>[v(n(o.value.category.name),1)]),_:1},8,["to"]),Z,ee,s(h,{to:{name:"explorar-subcategoria-slug",params:{slug:o.value.subcategory.slug}},class:"text-blue-600 hover:underline"},{default:l(()=>[v(n(o.value.subcategory.name),1)]),_:1},8,["to"])])):(r(),d("p",te,"Cargando categoría y subcategoría..."))])]),e("div",ae,[se,a.isLoading?(r(),d("div",oe,"Cargando características...")):m.value.length===0?(r(),d("div",le,"Este producto no tiene características.")):(r(),d("ul",ce,[(r(!0),d(B,null,E(m.value,i=>(r(),d("li",{key:i.id,class:"mt-2"},[s(c(G),{as:"div",class:"mt-2"},{default:l(({open:b})=>[s(c(A),{class:"flex w-full justify-between rounded-lg bg-gray-50 px-4 py-2 text-left text-sm font-medium text-gray-900 hover:bg-gray-200 focus:outline-none focus-visible:ring focus-visible:ring-gray-500/75"},{default:l(()=>[e("span",null,n(i.name)+": "+n(i.value),1),s(c(z),{class:F([{"rotate-180 transform":!b},"h-5 w-5 text-gray-500"])},null,8,["class"])]),_:2},1024),s(c(T),{class:"px-4 pb-2 pt-4 text-sm text-gray-500"},{default:l(()=>[v(n(i.description),1)]),_:2},1024)]),_:2},1024)]))),128))]))]),e("div",re,[e("button",{onClick:y[0]||(y[0]=(...i)=>t.closeModal&&t.closeModal(...i)),class:"rounded-md bg-gray-600 px-4 py-2 text-white hover:bg-gray-700"},"Cerrar")])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])}}},ie={class:"relative flex flex-col justify-between rounded-xl bg-white bg-clip-border p-2 text-gray-700 transition-all duration-200 hover:shadow-md"},de=["src"],ue={class:"flex h-full w-full animate-pulse items-center justify-center bg-gray-200"},ge=e("svg",{class:"h-5 w-5 animate-spin text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C6.48 0 2 4.48 2 10h2zm2 5.29l-1.42-1.42C6.6 14.09 7 12.6 7 11H5c0 1.76-.55 3.4-1.49 4.71L6 17.29z"})],-1),fe=[ge],me={class:"p-2 sm:p-3"},pe={class:"mb-2 flex items-center justify-between"},he={class:"line-clamp-2 font-sans text-sm font-medium leading-relaxed text-gray-900 antialiased"},ye={class:"line-clamp-2 font-sans text-xs font-normal leading-normal text-gray-700 antialiased opacity-75 sm:line-clamp-3"},ve={class:"flex w-full"},Ce={__name:"ProductCard",props:{product:Object,updatePrice:Function},emits:["agregar"],setup(t,{emit:g}){const m=t,o=u(!0),f=u(!1),p=u(null),x=()=>{o.value=!1},_=()=>{p.value=m.product,f.value=!0},a=()=>{f.value=!1};return(y,h)=>{const i=ne;return r(),d("div",ie,[e("div",{class:"relative aspect-square overflow-hidden rounded-xl bg-white bg-clip-border text-gray-700 hover:cursor-pointer",onClick:_},[M(e("img",{src:t.product.photo,onLoad:x,alt:"card-image",class:"h-full w-full object-cover object-center"},null,40,de),[[$,!o.value]]),M(e("div",ue,fe,512),[[$,o.value]])]),e("div",me,[e("div",pe,[e("p",he,n(t.product.name),1)]),e("p",ye,n(t.product.description),1)]),e("div",ve,[e("button",{class:"block w-full select-none rounded-lg bg-gray-900/10 px-5 py-3 text-center align-middle font-sans text-xs font-bold uppercase text-gray-900 shadow-none shadow-gray-900/10 transition-all hover:scale-105 hover:shadow-none hover:shadow-gray-900/20 focus:scale-105 focus:opacity-[0.85] focus:shadow-none active:scale-100 active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button",onClick:h[0]||(h[0]=b=>y.$emit("agregar",t.product,t.product.selectedMeasure))}," Agregar ")]),s(i,{showModal:f.value,product:p.value,closeModal:a},null,8,["showModal","product"])])}}};export{Ce as _};
