import{d as n,e as N,c,a as o,f as l,y as u,w as d,b as w,t as k,h as j,F as p,g as _,z as E,o as t,r as m,M}from"./CrqhMiQy.js";import{_ as R}from"./BEMygrUP.js";import{_ as A}from"./DOD0tu6-.js";import{_ as L}from"./fW5NUN-W.js";import{_ as U}from"./a35HPFvb.js";import{_ as I}from"./BB-wfttb.js";import"./D5frcmkF.js";import"./D8nVKWAM.js";import"./ZAqe-kNX.js";import"./NqQg103s.js";const q={class:"flex flex-col items-center justify-center space-y-4 px-3 py-8 md:py-12 xl:py-16"},z=o("h1",{class:"mb-4 text-center text-2xl font-extrabold text-gray-900 md:text-4xl lg:text-5xl"},[o("span",{class:"bg-gradient-to-r from-yellow-400 to-primary-600 bg-clip-text text-transparent"},"Materiales de Construcción")],-1),D={class:"relative w-full max-w-md"},G={key:0},Q={key:1,class:"p-4 text-center text-gray-500"},T={class:"font-semibold"},H={class:"col-span-full p-4 text-center text-gray-500"},J={class:"font-semibold"},K=o("h6",{class:"p-4 text-xl font-bold"},"Categorías",-1),O=o("h6",{class:"p-4 text-xl font-bold"},"Últimos productos agregados",-1),ce={__name:"index",setup(W){const f=n([]),g=n([]),h=n([]),s=n(""),y=n(!0),C=n(!0),P=async()=>{try{const e=await fetch(_("/supplier/explorar/getrecentproductsexplorar"));if(!e.ok)throw new Error("Failed to fetch recent products");const r=await e.json();f.value=r.data}catch(e){console.error(e)}finally{y.value=!1}},b=async()=>{try{const e=await fetch(_("/supplier/explorar/getcategories"));if(!e.ok)throw new Error("Failed to fetch categories");const r=await e.json();g.value=r.data}catch(e){console.error(e)}finally{C.value=!1}},S=async()=>{try{const e=await fetch(_(`/supplier/explorar/searchrecentproductsexplorar?query=${s.value}`));if(!e.ok)throw new Error("Failed to search products");const r=await e.json();h.value=r.data}catch(e){console.error(e)}},x=e=>{M(e)};return N(()=>{b(),P()}),(e,r)=>{const V=E,v=R,i=A,F=L,$=U,B=I;return t(),c(p,null,[o("div",q,[z,o("div",D,[l(V,{type:"text",modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=a=>s.value=a),onInput:S,placeholder:"Buscar General..",class:"mb-4 w-full rounded border p-2"},null,8,["modelValue"])])]),s.value?(t(),c("div",G,[e.isSearching?(t(),u(i,{key:0},{default:d(()=>[(t(),c(p,null,m(6,a=>l(v,{key:a})),64))]),_:1})):e.noResultsFound?(t(),c("div",Q,[w(" No se encontró ningún producto llamado "),o("span",T,k(s.value),1)])):(t(),u(i,{key:2},{default:d(()=>[o("p",H,[w(" Productos encontrados para "),o("span",J,k(s.value),1)]),l(F,{products:h.value,onAgregar:x,updatePrice:e.updatePrice},null,8,["products","updatePrice"])]),_:1}))])):j("",!0),o("div",null,[K,l(i,null,{default:d(()=>[l($,{items:g.value,category:""},null,8,["items"])]),_:1})]),o("div",null,[O,y.value?(t(),u(i,{key:0},{default:d(()=>[(t(),c(p,null,m(6,a=>l(v,{key:a})),64))]),_:1})):(t(),u(i,{key:1},{default:d(()=>[(t(!0),c(p,null,m(f.value,a=>(t(),u(B,{key:a.id,product:a,onAgregar:x},null,8,["product"]))),128))]),_:1}))])],64)}}};export{ce as default};
