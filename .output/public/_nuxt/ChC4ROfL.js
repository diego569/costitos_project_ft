import{d as u,o as s,c as l,f as d,w as x,a as t,i as z,O as V,t as f,C as N,n as C,u as S,s as q,I as ee,e as te,F as $,D as m,g as v,r as k,S as se,j as ae,h as A,y as L,_ as oe,X as le,z as re}from"./CrqhMiQy.js";import{_ as ne}from"./D5frcmkF.js";import{_ as ce}from"./BN5LnR2E.js";const ie={class:"relative flex flex-col justify-between rounded-xl bg-white bg-clip-border p-2 text-gray-700 transition-all duration-200 hover:shadow-md"},ue={class:"relative aspect-square overflow-hidden rounded-xl bg-white bg-clip-border text-gray-700"},de=["src"],pe={class:"flex h-full w-full animate-pulse items-center justify-center bg-gray-200"},_e=t("svg",{class:"h-5 w-5 animate-spin text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C6.48 0 2 4.48 2 10h2zm2 5.29l-1.42-1.42C6.6 14.09 7 12.6 7 11H5c0 1.76-.55 3.4-1.49 4.71L6 17.29z"})],-1),me=[_e],ve={class:"p-2 sm:p-3"},fe={class:"mb-2 flex items-center justify-between"},he={class:"line-clamp-2 font-sans text-sm font-medium leading-relaxed text-gray-900 antialiased"},ge={class:"line-clamp-2 font-sans text-xs font-normal leading-normal text-gray-700 antialiased opacity-75 sm:line-clamp-3"},ye={class:"flex justify-between p-2"},xe={class:"line-clamp-2 font-sans text-sm font-medium leading-relaxed text-gray-900 antialiased"},be={class:"line-clamp-2 font-sans text-sm font-medium leading-relaxed text-gray-900 antialiased"},we={__name:"Product",props:{product:Object,updatePrice:Function},emits:["agregar"],setup(p,{emit:c}){const _=u(!0),b=()=>{_.value=!1};return(w,h)=>{const i=ne;return s(),l("div",ie,[d(i,{class:"pointer"},{default:x(()=>[t("div",ue,[z(t("img",{src:p.product.photo,onLoad:b,alt:"card-image",class:"h-full w-full object-cover object-center"},null,40,de),[[V,!_.value]]),z(t("div",pe,me,512),[[V,_.value]])]),t("div",ve,[t("div",fe,[t("p",he,f(p.product.name),1)]),t("p",ge,f(p.product.description),1)])]),_:1}),t("div",ye,[t("div",xe,"S/. "+f(p.product.price),1),t("div",be,f(p.product.unitOfMeasure),1)])])}}},$e={__name:"Submain",setup(p){return(c,_)=>(s(),l("div",{class:C(["grid gap-2 sm:gap-4",S(q)?"grid-cols-2 md:grid-cols-3 2xl:grid-cols-4":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6"])},[N(c.$slots,"default")],2))}},Ce={__name:"Main",setup(p){return(c,_)=>(s(),l("div",{class:C(["grid gap-2 sm:gap-4",S(q)?"md:grid-cols-6 xl:grid-cols-8":"md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10"])},[N(c.$slots,"default")],2))}},ke={class:"overflow-auto rounded-lg border bg-white md:col-span-2"},Se=t("h6",{class:"p-3 text-lg font-bold"},"Categorías",-1),Be={class:"overflow-auto"},Pe=["onClick"],Me={class:"flex items-center gap-2"},je={class:"flex h-full w-full items-center justify-center"},Ie={class:"flex h-full w-full items-center justify-center"},Le={class:"select-none font-sans text-xs font-normal leading-normal antialiased"},Ee={key:0},Te=["onClick"],Ge={class:"flex items-center gap-2"},ze={class:"select-none font-sans text-xs font-normal leading-normal antialiased"},Ve={key:0},Ae=t("p",null,"Cargando productos...",-1),Ne=[Ae],qe={key:1},Ue={class:"mb-4 flex justify-between"},De={class:"p-1.5 text-lg font-bold"},Fe={key:0},Oe=t("p",null,"Cargando resultados...",-1),Re=[Oe],He={key:0},Qe=t("h6",{class:"mt-4 p-3 text-lg font-bold"},"Productos",-1),Ye={__name:"index",setup(p){const c=ee(),_=u([]),b=u([]),w=u([]),h=u([]),i=u(""),U=u(!0),g=u(!1),B=u(!1),a=u(null),r=u(null),D=async()=>{try{const e=await m(v(`/supplier/misproductos/getcategoriesbysupplier2/${c}`),"GET");_.value=e.data}catch(e){console.error(e)}finally{U.value=!1}},F=async e=>{try{const n=await m(v(`/supplier/misproductos/getsubcategoriesbysupplierandcategory/${c}/${e}`),"GET");b.value=n.data}catch(n){console.error(n)}},P=async()=>{g.value=!0;try{const e=await m(v(`/supplier/misproductos/getproductsbysupplier/${c}`),"GET");w.value=e.data}catch(e){console.error(e)}finally{g.value=!1}},M=async e=>{g.value=!0;try{const n=await m(v(`/supplier/misproductos/getproductsbysupplierandcategory/${c}/${e}`),"GET");w.value=n.data}catch(n){console.error(n)}finally{g.value=!1}},E=async e=>{g.value=!0;try{const n=await m(v(`/supplier/misproductos/getproductsbysupplierandsubcategory/${c}/${e}`),"GET");w.value=n.data}catch(n){console.error(n)}finally{g.value=!1}},O=async()=>{if(!i.value.trim()){h.value=[];return}B.value=!0;try{let e;r.value?e=await m(v(`/supplier/misproductos/searchproductsbysupplierandsubcategory/${c}/${r.value}?query=${i.value}`),"GET"):a.value?e=await m(v(`/supplier/misproductos/searchproductsbysupplierandcategory/${c}/${a.value}?query=${i.value}`),"GET"):e=await m(v(`/supplier/misproductos/searchproductsbysupplier/${c}?query=${i.value}`),"GET"),h.value=e.data}catch(e){console.error(e)}finally{B.value=!1}},R=e=>{a.value===e.id?(a.value=null,r.value=null,b.value=[],P()):(a.value=e.id,r.value=null,F(e.id),M(e.id)),i.value="",h.value=[]},H=e=>{r.value===e.id?(r.value=null,M(a.value)):(r.value=e.id,E(e.id)),i.value="",h.value=[]};te(()=>{D(),P()});const j=u(!1),Q=()=>{j.value=!0},W=()=>{j.value=!1},X=()=>{r.value?E(r.value):a.value?M(a.value):P()};return(e,n)=>{const I=oe,J=le,K=re,T=we,G=$e,Y=Ce,Z=ce;return s(),l($,null,[d(Y,{class:"max-h-[calc(100vh_-_100px)]"},{default:x(()=>[t("div",ke,[Se,t("div",Be,[(s(!0),l($,null,k(_.value,o=>(s(),l("div",{key:o.id},[t("div",{onClick:y=>R(o),class:C([{"text-black":a.value===o.id,"text-gray-600":a.value!==o.id},"flex cursor-pointer items-center justify-start border-t p-2 hover:bg-primary-200"])},[t("div",Me,[t("div",je,[d(I,{name:a.value===o.id?"my-icon:caret-down":"my-icon:caret-right",size:"20"},null,8,["name"])]),t("div",Ie,[d(I,{name:a.value===o.id?"my-icon:folder-open":"my-icon:folder-close",size:"20"},null,8,["name"])]),t("p",Le,f(o.name),1)])],10,Pe),d(S(se),{show:a.value===o.id,as:"template"},{default:x(()=>[d(S(ae),{as:"div",enter:"transition ease-out duration-300 transform","enter-from":"-translate-y-4 opacity-0","enter-to":"translate-y-0 opacity-100",leave:"transition ease-in duration-200 transform","leave-from":"translate-y-0 opacity-100","leave-to":"-translate-y-4 opacity-0"},{default:x(()=>[a.value===o.id?(s(),l("div",Ee,[(s(!0),l($,null,k(b.value,y=>(s(),l("div",{key:y.id,onClick:We=>H(y),class:C([{"bg-primary-500 text-white":r.value===y.id,"text-gray-600 hover:bg-primary-200":r.value!==y.id},"cursor-pointer border-t p-2 text-gray-400"])},[t("div",Ge,[d(I,{name:"my-icon:circles-four",size:"20"}),t("p",ze,f(y.name),1)])],10,Te))),128))])):A("",!0)]),_:2},1024)]),_:2},1032,["show"])]))),128))])]),t("div",{class:C(["hidden h-full overflow-auto rounded-lg md:block",e.showMenu?"col-span-2 md:col-span-4 xl:col-span-6":"col-span-2 md:col-span-4 lg:col-span-6 xl:col-span-8"])},[g.value?(s(),l("div",Ve,Ne)):(s(),l("div",qe,[t("div",Ue,[t("h6",De,f(r.value?"Buscar Productos en Subcategoría":a.value?"Buscar Productos en Categoría":"Buscar Productos"),1),d(J,{variant:"primary",onClick:Q,defaultText:"Agregar nuevo producto"})]),d(K,{id:"search",type:"text",modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=o=>i.value=o),onInput:O,placeholder:r.value?"Buscar productos en subcategoría...":a.value?"Buscar productos en categoría...":"Buscar productos..."},null,8,["modelValue","placeholder"]),B.value?(s(),l("div",Fe,Re)):(s(),L(G,{key:1},{default:x(()=>[(s(!0),l($,null,k(h.value,o=>(s(),L(T,{key:o.supplier_product_id,product:o},null,8,["product"]))),128)),!h.value.length&&i.value.trim()?(s(),l("p",He,'No se encontraron resultados para "'+f(i.value)+'"',1)):A("",!0)]),_:1})),Qe,d(G,null,{default:x(()=>[(s(!0),l($,null,k(w.value,o=>(s(),L(T,{key:o.supplier_product_id,product:o},null,8,["product"]))),128))]),_:1})]))],2)]),_:1}),d(Z,{showModal:j.value,closeModal:W,categoryId:a.value,subcategoryId:r.value,onProductAdded:X},null,8,["showModal","categoryId","subcategoryId"])],64)}}};export{Ye as default};
