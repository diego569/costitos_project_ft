import{_ as z}from"./iX1cS9f_.js";import{q as D,d as r,e as T,c as u,a as e,f as n,w as l,u as o,t as x,h as E,x as Z,y as p,b as g,F as v,g as f,z as G,o as s,r as C,A as H}from"./D-0pglP5.js";import{_ as J}from"./BemgXLyn.js";import{_ as K}from"./C3-LtGzd.js";import{_ as W}from"./C3el6Qte.js";import{_ as X,a as Y}from"./lYjH4jOn.js";const tt={class:"flex","aria-label":"Breadcrumb"},et={class:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse"},ot={class:"inline-flex items-center"},st=e("svg",{class:"me-2.5 h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})],-1),at={key:0},rt={class:"flex items-center"},nt=e("svg",{class:"mx-1 h-3 w-3 text-gray-400 rtl:rotate-180","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),ct={class:"ms-1 text-sm font-medium text-gray-700 md:ms-2"},lt={class:"flex flex-col items-center justify-center space-y-4 px-3 py-8 md:py-12 xl:py-16"},it={class:"mb-4 text-center text-2xl font-extrabold text-gray-900 md:text-4xl lg:text-5xl"},ut={class:"bg-gradient-to-r from-yellow-400 to-primary-600 bg-clip-text text-transparent"},dt={class:"relative w-full max-w-md"},_t={key:0},pt={key:1,class:"p-4 text-center text-gray-500"},mt={class:"font-semibold"},ft={class:"col-span-full p-4 text-center text-gray-500"},gt={class:"font-semibold"},ht=e("hr",null,null,-1),yt=e("p",{class:"py-4 text-center text-lg text-gray-500 md:py-6 md:text-xl"},[g("O "),e("span",{class:"font-bold text-gray-900"},"Buscar"),g(" por subcategorias")],-1),xt=e("h6",{class:"p-4 text-xl font-bold"},"Últimos productos agregados",-1),vt=e("h6",{class:"p-4 text-xl font-bold"},"Productos más cotizados",-1),Nt={__name:"index",setup(wt){const d=D().params.slug,w=r(""),B=r([]),F=r([]),N=r([]),c=r(""),h=r([]),M=r(!0),V=r(!0),j=r(!0),y=r(!1),m=r(!1),b=t=>{H(t,{supplierProductId:t.id,unitOfMeasure:t.unitOfMeasure})},k=t=>{console.log("Selected product",t.id)},S=async()=>{try{const t=await fetch(f(`/guest/categoria/getcategorynamebyslug/${d}`));if(!t.ok)throw new Error("Failed to fetch category name");const a=await t.json();w.value=a.category.name}catch(t){console.error("Error fetching category name:",t)}},L=async()=>{try{const t=await fetch(f(`/guest/categoria/getsubcategoriesbycategoryslug/${d}`));if(!t.ok)throw new Error("Failed to fetch subcategories");const a=await t.json();B.value=a.data}catch(t){console.error(t)}finally{M.value=!1}},R=async()=>{try{const t=await fetch(f(`/guest/categoria/getrecentsupplierproductsbycategory/${d}`));if(!t.ok)throw new Error("Failed to fetch recent products");const a=await t.json();F.value=a.data}catch(t){console.error(t)}finally{V.value=!1}},A=async()=>{try{const t=await fetch(f(`/guest/categoria/getmostquotedproductsbycategory/${d}`));if(!t.ok)throw new Error("Failed to fetch most quoted products");const a=await t.json();N.value=a.data}catch(t){console.error(t)}finally{j.value=!1}},U=async()=>{if(c.value.trim()===""){h.value=[],m.value=!1,y.value=!1;return}y.value=!0,m.value=!1;try{const t=await fetch(f(`/guest/categoria/searchsupplierproductsbycategory/${d}?query=${c.value}`));if(!t.ok)throw new Error("Failed to search products");const a=await t.json();h.value=a.data,h.value.length===0&&(m.value=!0)}catch(t){console.error(t),m.value=!0}finally{y.value=!1}};return T(()=>{S(),L(),R(),A()}),(t,a)=>{const q=z,I=G,P=J,_=K,$=W,Q=Y,O=X;return s(),u(v,null,[e("nav",tt,[e("ol",et,[e("li",ot,[n(q,{to:"/",class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-primary-600"},{default:l(()=>[st,g(" Inicio ")]),_:1})]),o(d)?(s(),u("li",at,[e("div",rt,[nt,e("div",ct,x(o(w)),1)])])):E("",!0)])]),e("div",lt,[e("h1",it,[e("span",ut,x(o(w)),1)]),e("div",dt,[n(I,{type:"text",modelValue:o(c),"onUpdate:modelValue":a[0]||(a[0]=i=>Z(c)?c.value=i:null),onInput:U,placeholder:"Buscar en categoria...",class:"mb-4 w-full rounded border p-2"},null,8,["modelValue"])])]),o(c)?(s(),u("div",_t,[o(y)?(s(),p(_,{key:0},{default:l(()=>[(s(),u(v,null,C(6,i=>n(P,{key:i})),64))]),_:1})):o(m)?(s(),u("div",pt,[g(" No se encontró ningún producto llamado "),e("span",mt,x(o(c)),1)])):(s(),p(_,{key:2},{default:l(()=>[e("p",ft,[g(" Productos encontrados para "),e("span",gt,x(o(c)),1)]),n($,{products:o(h),onAgregar:b,updatePrice:k},null,8,["products"])]),_:1}))])):E("",!0),ht,e("div",null,[yt,n(O,null,{default:l(()=>[n(Q,{items:o(B),subcategory:""},null,8,["items"])]),_:1})]),e("div",null,[xt,o(V)?(s(),p(_,{key:0},{default:l(()=>[(s(),u(v,null,C(6,i=>n(P,{key:i})),64))]),_:1})):(s(),p(_,{key:1},{default:l(()=>[n($,{products:o(F),onAgregar:b,updatePrice:k},null,8,["products"])]),_:1}))]),e("div",null,[vt,o(j)?(s(),p(_,{key:0},{default:l(()=>[(s(),u(v,null,C(6,i=>n(P,{key:i})),64))]),_:1})):(s(),p(_,{key:1},{default:l(()=>[n($,{products:o(N),onAgregar:b,updatePrice:k},null,8,["products"])]),_:1}))])],64)}}};export{Nt as default};
