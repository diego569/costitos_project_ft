import{_ as M}from"./B19raBlQ.js";import{q as U,d as r,e as q,c,a as t,f as l,w as i,u as z,t as _,h as P,y as p,b as y,F as m,g as f,z as D,o,r as x,M as Q}from"./ETjmORjC.js";import{_ as T}from"./BR0Yk77c.js";import{_ as Z}from"./C0iT-mBB.js";import{_ as G}from"./DeaF08OB.js";import{_ as H}from"./DTkGB3XS.js";import{_ as J}from"./dp0mG4s4.js";import"./CX6hkWh7.js";import"./dTx25JJ4.js";import"./BMzV71w9.js";const K={class:"flex","aria-label":"Breadcrumb"},O={class:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse"},W={class:"inline-flex items-center"},X=t("svg",{class:"me-2.5 h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})],-1),Y={key:0},ee={class:"flex items-center"},te=t("svg",{class:"mx-1 h-3 w-3 text-gray-400 rtl:rotate-180","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),oe={class:"ms-1 text-sm font-medium text-gray-700 md:ms-2"},ae={class:"flex flex-col items-center justify-center space-y-4 px-3 py-8 md:py-12 xl:py-16"},se={class:"mb-4 text-center text-2xl font-extrabold text-gray-900 md:text-4xl lg:text-5xl"},re={class:"bg-gradient-to-r from-yellow-400 to-primary-600 bg-clip-text text-transparent"},ne={class:"relative w-full max-w-md"},ce={key:0},le={key:1,class:"p-4 text-center text-gray-500"},ie={class:"font-semibold"},ue={class:"col-span-full p-4 text-center text-gray-500"},de={class:"font-semibold"},pe=t("hr",null,null,-1),_e=t("h6",{class:"p-4 text-xl font-bold"},"Subcategorías",-1),me=t("h6",{class:"p-4 text-xl font-bold"},"Últimos productos agregados",-1),$e={__name:"index",setup(fe){const u=U().params.slug,g=r(""),v=r([]),n=r(""),h=r([]),w=r([]),$=r(!0),b=r(!0),k=r(!1),S=e=>{Q(e)},B=e=>{console.log("Selected product",e.id)},N=async()=>{try{const e=await fetch(f(`/guest/categoria/getcategorynamebyslug/${u}`));if(!e.ok)throw new Error("Failed to fetch category name");const a=await e.json();g.value=a.category.name}catch(e){console.error("Error fetching category name:",e)}},V=async()=>{try{const e=await fetch(f(`/supplier/categoria/getsubcategoriesbycategoryslug/${u}`));if(!e.ok)throw new Error("Failed to fetch subcategories");const a=await e.json();v.value=a.data}catch(e){console.error(e)}finally{$.value=!1}},F=async()=>{try{const e=await fetch(f(`/supplier/categoria/getrecentproductsbycategory/${u}`));if(!e.ok)throw new Error("Failed to fetch recent products");const a=await e.json();w.value=a.data}catch(e){console.error(e)}finally{b.value=!1}},j=async()=>{if(n.value.trim()===""){h.value=[];return}try{k.value=!0;const e=await fetch(f(`/supplier/categoria/searchrecentproductsbycategory/${u}?query=${n.value}`));if(!e.ok)throw new Error("Failed to search products");const a=await e.json();h.value=a.data}catch(e){console.error(e)}finally{k.value=!1}};return q(()=>{N(),V(),F()}),(e,a)=>{const E=M,L=D,C=T,d=Z,R=G,A=H,I=J;return o(),c(m,null,[t("nav",K,[t("ol",O,[t("li",W,[l(E,{to:"/explorar",class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-primary-600"},{default:i(()=>[X,y(" Inicio ")]),_:1})]),z(u)?(o(),c("li",Y,[t("div",ee,[te,t("div",oe,_(g.value),1)])])):P("",!0)])]),t("div",ae,[t("h1",se,[t("span",re,_(g.value),1)]),t("div",ne,[l(L,{type:"text",modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=s=>n.value=s),onInput:j,placeholder:"Buscar en categoria...",class:"mb-4 w-full rounded border p-2"},null,8,["modelValue"])])]),n.value?(o(),c("div",ce,[e.isSearching?(o(),p(d,{key:0},{default:i(()=>[(o(),c(m,null,x(6,s=>l(C,{key:s})),64))]),_:1})):e.noResultsFound?(o(),c("div",le,[y(" No se encontró ningún producto llamado "),t("span",ie,_(n.value),1)])):(o(),p(d,{key:2},{default:i(()=>[t("p",ue,[y(" Productos encontrados para "),t("span",de,_(n.value),1)]),l(R,{products:h.value,onAgregar:S,updatePrice:B},null,8,["products"])]),_:1}))])):P("",!0),pe,t("div",null,[_e,l(d,null,{default:i(()=>[l(A,{items:v.value,subcategory:""},null,8,["items"])]),_:1})]),t("div",null,[me,b.value?(o(),p(d,{key:0},{default:i(()=>[(o(),c(m,null,x(6,s=>l(C,{key:s})),64))]),_:1})):(o(),p(d,{key:1},{default:i(()=>[(o(!0),c(m,null,x(w.value,s=>(o(),p(I,{key:s.id,product:s,onAgregar:S},null,8,["product"]))),128))]),_:1}))])],64)}}};export{$e as default};
